{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://sigs.k8s.io/cluster-api/api/v1beta1/cluster","properties":{"kind":{"type":"string","default":"Cluster"},"apiVersion":{"type":"string","default":"cluster.x-k8s.io/v1beta1"},"metadata":{"properties":{"name":{"type":"string"},"namespace":{"type":"string","default":"playground0"},"labels":{"additionalProperties":{"type":"string"},"type":"object","properties":{"managed-secret":{"type":"string","default":"cloud-config"}}}},"additionalProperties":false,"type":"object"},"spec":{"properties":{"clusterNetwork":{"properties":{"services":{"properties":{"cidrBlocks":{"items":{"type":"string"},"type":"array","default":["10.96.0.0/16"]}},"additionalProperties":false,"type":"object","required":["cidrBlocks"]},"pods":{"properties":{"cidrBlocks":{"items":{"type":"string"},"type":"array","default":["192.168.0.0/16"]}},"additionalProperties":false,"type":"object","required":["cidrBlocks"]},"serviceDomain":{"type":"string","default":"cluster.local"}},"additionalProperties":false,"type":"object"},"topology":{"properties":{"class":{"type":"string","default":"scs-v1"},"version":{"type":"string","default":"v1.29.3"},"controlPlane":{"properties":{"replicas":{"type":"integer","default":"1"}},"additionalProperties":false,"type":"object"},"workers":{"properties":{"machineDeployments":{"items":{"properties":{"class":{"type":"string"},"name":{"type":"string"},"failureDomain":{"type":"string"},"replicas":{"type":"integer"}},"additionalProperties":false,"type":"object","required":["class","name"]},"type":"array","default":[{"class":"scs-v1","failureDomain":"nova","name":"scs-v1","replicas":3}]}},"additionalProperties":false,"type":"object"},"variables":{"items":[{"type":"object","properties":{"name":{"type":"string","default":"certSANs","const":"certSANs"},"value":{"description":"CertSANs sets extra Subject Alternative Names for the API Server signing cert.","example":["mydomain.example"],"type":"array","items":{"type":"string"},"default":[]}}},{"type":"object","properties":{"name":{"type":"string","default":"cloud_name","const":"cloud_name"},"value":{"description":"The name of the cloud to use from the clouds secret","example":"openstack","type":"string","default":"openstack"}}},{"type":"object","properties":{"name":{"type":"string","default":"controller_flavor","const":"controller_flavor"},"value":{"description":"OpenStack instance flavor for control-plane nodes.","example":"SCS-2V-4-20","type":"string","default":"SCS-2V-4-20"}}},{"type":"object","properties":{"name":{"type":"string","default":"controller_root_disk","const":"controller_root_disk"},"value":{"description":"Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.","example":20,"type":"integer","minimum":1}}},{"type":"object","properties":{"name":{"type":"string","default":"controller_server_group_id","const":"controller_server_group_id"},"value":{"description":"The server group to assign the control plane nodes to.","example":"3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3","type":"string","default":""}}},{"type":"object","properties":{"name":{"type":"string","default":"dns_nameservers","const":"dns_nameservers"},"value":{"description":"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.","example":["5.1.66.255","185.150.99.255"],"type":"array","items":{"type":"string"},"default":["5.1.66.255","185.150.99.255"]}}},{"type":"object","properties":{"name":{"type":"string","default":"external_id","const":"external_id"},"value":{"description":"ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.","example":"ebfe5546-f09f-4f42-ab54-094e457d42ec","type":"string","format":"uuid4","default":"ebfe5546-f09f-4f42-ab54-094e457d42ec"}}},{"type":"object","properties":{"name":{"type":"string","default":"node_cidr","const":"node_cidr"},"value":{"description":"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.","example":"10.8.0.0/20","type":"string","format":"cidr","default":"10.8.0.0/20"}}},{"type":"object","properties":{"name":{"type":"string","default":"oidc_config","const":"oidc_config"},"value":{"type":"object","properties":{"client_id":{"description":"A client id that all tokens must be issued for.","example":"kubectl","type":"string"},"groups_claim":{"description":"JWT claim to use as the user's group. If the claim is present it must be an array of strings.","example":"groups","type":"string","default":"groups"},"groups_prefix":{"description":"Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.","example":"oidc:","type":"string","default":"oidc:"},"issuer_url":{"description":"URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path","example":"https://dex.k8s.scs.community","type":"string"},"username_claim":{"description":"JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.","example":"preferred_username","type":"string","default":"sub"},"username_prefix":{"description":"Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.","example":"oidc:","type":"string","default":"oidc:"}}}}},{"type":"object","properties":{"name":{"type":"string","default":"openstack_loadbalancer_apiserver","const":"openstack_loadbalancer_apiserver"},"value":{"description":"Enables custom load balancer for OpenStack API server","type":"boolean","default":true}}},{"type":"object","properties":{"name":{"type":"string","default":"openstack_loadbalancer_apiserver_provider","const":"openstack_loadbalancer_apiserver_provider"},"value":{"description":"The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)","example":"ovn","type":"string","default":"amphora"}}},{"type":"object","properties":{"name":{"type":"string","default":"openstack_security_groups","const":"openstack_security_groups"},"value":{"description":"The names of the security groups to assign to the instance","example":["security-group-1"],"type":"array","items":{"type":"string"},"default":[]}}},{"type":"object","properties":{"name":{"type":"string","default":"secret_name","const":"secret_name"},"value":{"description":"The name of the clouds secret","example":"openstack","type":"string","default":"openstack"}}},{"type":"object","properties":{"name":{"type":"string","default":"ssh_key","const":"ssh_key"},"value":{"description":"The ssh key to inject in the nodes.","example":"capi-keypair","type":"string","default":""}}},{"type":"object","properties":{"name":{"type":"string","default":"worker_flavor","const":"worker_flavor"},"value":{"description":"OpenStack instance flavor for worker nodes.","example":"SCS-2V-4-20","type":"string","default":"SCS-2V-4-20"}}},{"type":"object","properties":{"name":{"type":"string","default":"worker_root_disk","const":"worker_root_disk"},"value":{"description":"Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.","example":20,"type":"integer","minimum":1}}},{"type":"object","properties":{"name":{"type":"string","default":"worker_server_group_id","const":"worker_server_group_id"},"value":{"description":"The server group to assign the worker nodes to.","example":"869fe071-1e56-46a9-9166-47c9f228e297","type":"string","default":""}}}],"type":"array"}},"additionalProperties":false,"type":"object","required":["class","version"]}},"additionalProperties":false,"type":"object"}},"additionalProperties":false,"type":"object"}